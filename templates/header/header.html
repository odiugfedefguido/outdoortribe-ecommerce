<?php
if (!isset($BASE) || $BASE === '') { include __DIR__ . '/../../public/config_path.php'; }
if (session_status() === PHP_SESSION_NONE) session_start();
?>
<header>
  <div class="left-section">
    <a href="<?= $BASE ?>/public/">
      <img class="logo" src="<?= $BASE ?>/assets/icons/logo.svg" alt="OutdoorTribe">
    </a>
  </div>

  <div class="right-section">
    <button class="btn-secondary" data-theme-toggle style="padding:6px 10px; border-radius:8px;">ðŸŒ™</button>

    <img class="menu-icon" src="<?= $BASE ?>/assets/icons/optionsMenu.svg" alt="menu">
    <nav class="menu">
      <a href="<?= $BASE ?>/public/">Home</a>
      <a href="<?= $BASE ?>/public/products/list.php">Prodotti</a>
      <a href="<?= $BASE ?>/public/cart/view.php">Carrello</a>
      <a href="<?= $BASE ?>/public/orders/my_orders.php">I miei ordini</a>

      <?php if (!empty($_SESSION['user_role']) && $_SESSION['user_role'] === 'admin'): ?>
        <a href="<?= $BASE ?>/admin/product_new.php">Admin: nuovo prodotto</a>
      <?php endif; ?>

      <?php if (empty($_SESSION['user_id'])): ?>
        <a href="<?= $BASE ?>/public/auth/login.php">Log in</a>
        <a href="<?= $BASE ?>/public/auth/signup.php">Registrati</a>
      <?php else: ?>
        <a href="<?= $BASE ?>/public/auth/logout.php">Log out</a>
      <?php endif; ?>
    </nav>
  </div>
</header>

<script src="<?= $BASE ?>/public/javascript/menu.js"></script>
<script src="<?= $BASE ?>/public/javascript/theme.js"></script>
